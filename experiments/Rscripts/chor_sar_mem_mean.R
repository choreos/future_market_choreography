library("ggplot2")

registry_data <- list(read.table("data/chor/050/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/registry/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/registry/mem_sar.out",head=FALSE,sep=" "))
broker_data <- list(read.table("data/chor/050/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/broker/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/broker/mem_sar.out",head=FALSE,sep=" "))
shipper_data <- list(read.table("data/chor/050/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/shipper/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/shipper/mem_sar.out",head=FALSE,sep=" "))
sm1_data <- list(read.table("data/chor/050/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/sm1/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/sm1/mem_sar.out",head=FALSE,sep=" "))
sm2_data <- list(read.table("data/chor/050/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/sm2/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/sm2/mem_sar.out",head=FALSE,sep=" ")) 
sm3_data <- list(read.table("data/chor/050/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/100/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/150/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/200/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/250/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/300/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/350/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/400/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/450/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/500/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/550/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/600/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/650/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/700/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/750/sm3/mem_sar.out",head=FALSE,sep=" "), read.table("data/chor/800/sm3/mem_sar.out",head=FALSE,sep=" "))

all_data <- list(registry_data, broker_data, shipper_data, sm1_data, sm2_data, sm3_data)

name <- c("chor_sar_mem_registry.png", "chor_sar_mem_broker.png", "chor_sar_mem_shipper.png", "chor_sar_mem_sm1.png", "chor_sar_mem_sm2.png", "chor_sar_mem_sm3.png") 

for (i in 1:length(all_data)) {
	data <- all_data[[i]]

banco = data.frame(Threads=c(050,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800),
			 Mean_of_Mem_Usage = c(mean(data[[1]][2]-data[[1]][3]-data[[1]][4]),mean(data[[2]][2]-data[[2]][3]-data[[2]][4]),mean(data[[3]][2]-data[[3]][3]-data[[3]][4]),mean(data[[4]][2]-data[[4]][3]-data[[4]][4]),mean(data[[5]][2]-data[[5]][3]-data[[5]][4]),mean(data[[6]][2]-data[[6]][3]-data[[6]][4]),mean(data[[7]][2]-data[[7]][3]-data[[7]][4]),mean(data[[8]][2]-data[[8]][3]-data[[8]][4]),mean(data[[9]][2]-data[[9]][3]-data[[9]][4]),mean(data[[10]][2]-data[[10]][3]-data[[10]][4]),mean(data[[11]][2]-data[[11]][3]-data[[11]][4]),mean(data[[12]][2]-data[[12]][3]-data[[12]][4]),mean(data[[13]][2]-data[[13]][3]-data[[13]][4]),mean(data[[14]][2]-data[[14]][3]-data[[14]][4]),mean(data[[15]][2]-data[[15]][3]-data[[15]][4]),mean(data[[16]][2]-data[[16]][3]-data[[16]][4])),
			 sigma=c(sd(data[[1]][2]-data[[1]][3]-data[[1]][4]),sd(data[[2]][2]-data[[2]][3]-data[[2]][4]),sd(data[[3]][2]-data[[3]][3]-data[[3]][4]),sd(data[[4]][2]-data[[4]][3]-data[[4]][4]),sd(data[[5]][2]-data[[5]][3]-data[[5]][4]),sd(data[[6]][2]-data[[6]][3]-data[[6]][4]),sd(data[[7]][2]-data[[7]][3]-data[[7]][4]),sd(data[[8]][2]-data[[8]][3]-data[[8]][4]),sd(data[[9]][2]-data[[9]][3]-data[[9]][4]),sd(data[[10]][2]-data[[10]][3]-data[[10]][4]),sd(data[[11]][2]-data[[11]][3]-data[[11]][4]),sd(data[[12]][2]-data[[12]][3]-data[[12]][4]),sd(data[[13]][2]-data[[13]][3]-data[[13]][4]),sd(data[[14]][2]-data[[14]][3]-data[[14]][4]),sd(data[[15]][2]-data[[15]][3]-data[[15]][4]),sd(data[[16]][2]-data[[16]][3]-data[[16]][4])))

# Mean Variation
	limits = aes(ymax = Mean_of_Mem_Usage + sigma, ymin= Mean_of_Mem_Usage - sigma)

# Plot
	png(name[i])

	print(ggplot(banco, aes(x=Threads,y=Mean_of_Mem_Usage)) + geom_point() + geom_errorbar(limits, width=50))
	dev.off()
}




