library("ggplot2")

registry_data <- list(read.table("data/orch/050/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/registry/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/registry/cpu_sar.out",head=FALSE,sep=" "))
broker_data <- list(read.table("data/orch/050/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/broker/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/broker/cpu_sar.out",head=FALSE,sep=" "))
shipper_data <- list(read.table("data/orch/050/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/shipper/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/shipper/cpu_sar.out",head=FALSE,sep=" "))
sm1_data <- list(read.table("data/orch/050/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/sm1/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/sm1/cpu_sar.out",head=FALSE,sep=" "))
sm2_data <- list(read.table("data/orch/050/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/sm2/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/sm2/cpu_sar.out",head=FALSE,sep=" ")) 
sm3_data <- list(read.table("data/orch/050/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/100/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/150/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/200/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/250/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/300/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/350/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/400/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/450/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/500/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/550/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/600/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/650/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/700/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/750/sm3/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/800/sm3/cpu_sar.out",head=FALSE,sep=" ")) 

all_data <- list(registry_data, broker_data, shipper_data, sm1_data, sm2_data, sm3_data)

name <- c("orch_sar_cpu_registry.png", "orch_sar_cpu_broker.png", "orch_sar_cpu_shipper.png", "orch_sar_cpu_sm1.png", "orch_sar_cpu_sm2.png", "orch_sar_cpu_sm3.png")

for (i in 1:length(all_data)) {
	data <- all_data[[i]]

banco = data.frame(Threads=c(050,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800),
			 Mean_of_cpu_usage=c(mean(100-data[[1]][2]),mean(100-data[[2]][2]),mean(100-data[[3]][2]),mean(100-data[[4]][2]),mean(100-data[[5]][2]),mean(100-data[[6]][2]),mean(100-data[[7]][2]),mean(100-data[[8]][2]),mean(100-data[[9]][2]),mean(100-data[[10]][2]),mean(100-data[[11]][2]),mean(100-data[[12]][2]),mean(100-data[[13]][2]),mean(100-data[[14]][2]),mean(100-data[[15]][2]),mean(100-data[[16]][2])),
			 sigma=c(sd(100-data[[1]][2]),sd(100-data[[2]][2]),sd(100-data[[3]][2]),sd(100-data[[4]][2]),sd(100-data[[5]][2]),sd(100-data[[6]][2]),sd(100-data[[7]][2]),sd(100-data[[8]][2]),sd(100-data[[9]][2]),sd(100-data[[10]][2]),sd(100-data[[11]][2]),sd(100-data[[12]][2]),sd(100-data[[13]][2]),sd(100-data[[14]][2]),sd(100-data[[15]][2]),sd(100-data[[16]][2])))

# Mean Variation
	limits = aes(ymax = Mean_of_cpu_usage + sigma, ymin= Mean_of_cpu_usage - sigma)

# Plot
	png(name[i])

	print(ggplot(banco, aes(x=Threads,y=Mean_of_cpu_usage)) + geom_point() + geom_errorbar(limits, width=50))
	dev.off()
}


