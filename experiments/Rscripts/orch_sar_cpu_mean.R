library("ggplot2")

registry_data <- list(read.table("data/orch/sar/registry/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/800/cpu_sar.out",head=FALSE,sep=" ")) 

broker_data <- list(read.table("data/orch/sar/broker/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/800/cpu_sar.out",head=FALSE,sep=" ")) 

shipper_data <- list(read.table("data/orch/sar/shipper/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/800/cpu_sar.out",head=FALSE,sep=" ")) 

sm1_data <- list(read.table("data/orch/sar/sm1/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/800/cpu_sar.out",head=FALSE,sep=" "))

sm2_data <- list(read.table("data/orch/sar/sm2/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/800/cpu_sar.out",head=FALSE,sep=" ")) 

sm3_data <- list(read.table("data/orch/sar/sm3/050/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/100/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/150/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/200/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/250/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/300/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/350/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/400/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/450/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/500/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/550/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/600/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/650/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/700/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/750/cpu_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/800/cpu_sar.out",head=FALSE,sep=" "))

all_data <- list(registry_data, broker_data, shipper_data, sm1_data, sm2_data, sm3_data)

name <- c("png/orch_sar_cpu_registry.png", "png/orch_sar_cpu_broker.png", "png/orch_sar_cpu_shipper.png", "png/orch_sar_cpu_sm1.png", "png/orch_sar_cpu_sm2.png", "png/orch_sar_cpu_sm3.png")

for (i in 1:length(all_data)) {
	data <- all_data[[i]]

banco = data.frame(Threads=c(050,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800),
			 Mean_of_cpu_usage=c(mean(100-data[[1]][3]),mean(100-data[[2]][3]),mean(100-data[[3]][3]),mean(100-data[[4]][3]),mean(100-data[[5]][3]),mean(100-data[[6]][3]),mean(100-data[[7]][3]),mean(100-data[[8]][3]),mean(100-data[[9]][3]),mean(100-data[[10]][3]),mean(100-data[[11]][3]),mean(100-data[[12]][3]),mean(100-data[[13]][3]),mean(100-data[[14]][3]),mean(100-data[[15]][3]),mean(100-data[[16]][3])),
			 sigma=c(sd(100-data[[1]][3]),sd(100-data[[2]][3]),sd(100-data[[3]][3]),sd(100-data[[4]][3]),sd(100-data[[5]][3]),sd(100-data[[6]][3]),sd(100-data[[7]][3]),sd(100-data[[8]][3]),sd(100-data[[9]][3]),sd(100-data[[10]][3]),sd(100-data[[11]][3]),sd(100-data[[12]][3]),sd(100-data[[13]][3]),sd(100-data[[14]][3]),sd(100-data[[15]][3]),sd(100-data[[16]][3])))

# Mean Variation
	limits = aes(ymax = Mean_of_cpu_usage + sigma, ymin= Mean_of_cpu_usage - sigma)

# Plot
	png(name[i])

	print(ggplot(banco, aes(x=Threads,y=Mean_of_cpu_usage)) + geom_point() + geom_errorbar(limits, width=50))
	dev.off()
}


