library("ggplot2")

registry_data <- list(read.table("data/orch/sar/registry/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/registry/800/mem_sar.out",head=FALSE,sep=" ")) 

broker_data <- list(read.table("data/orch/sar/broker/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/broker/800/mem_sar.out",head=FALSE,sep=" "))

shipper_data <- list(read.table("data/orch/sar/shipper/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/shipper/800/mem_sar.out",head=FALSE,sep=" ")) 

sm1_data <- list(read.table("data/orch/sar/sm1/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm1/800/mem_sar.out",head=FALSE,sep=" ")) 

sm2_data <- list(read.table("data/orch/sar/sm2/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm2/800/mem_sar.out",head=FALSE,sep=" ")) 

sm3_data <- list(read.table("data/orch/sar/sm3/050/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/100/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/150/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/200/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/250/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/300/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/350/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/400/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/450/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/500/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/550/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/600/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/650/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/700/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/750/mem_sar.out",head=FALSE,sep=" "), read.table("data/orch/sar/sm3/800/mem_sar.out",head=FALSE,sep=" ")) 


all_data <- list(registry_data, broker_data, shipper_data, sm1_data, sm2_data, sm3_data)

name <- c("png/orch_sar_mem_registry.png", "png/orch_sar_mem_broker.png", "png/orch_sar_mem_shipper.png", "png/orch_sar_mem_sm1.png", "png/orch_sar_mem_sm2.png", "png/orch_sar_mem_sm3.png") 

for (i in 1:length(all_data)) {
	data <- all_data[[i]]

banco = data.frame(Threads=c(050,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800),
			 Mean_of_Mem_Usage_kb = c(mean(data[[1]][2]-data[[1]][3]-data[[1]][4]),mean(data[[2]][2]-data[[2]][3]-data[[2]][4]),mean(data[[3]][2]-data[[3]][3]-data[[3]][4]),mean(data[[4]][2]-data[[4]][3]-data[[4]][4]),mean(data[[5]][2]-data[[5]][3]-data[[5]][4]),mean(data[[6]][2]-data[[6]][3]-data[[6]][4]),mean(data[[7]][2]-data[[7]][3]-data[[7]][4]),mean(data[[8]][2]-data[[8]][3]-data[[8]][4]),mean(data[[9]][2]-data[[9]][3]-data[[9]][4]),mean(data[[10]][2]-data[[10]][3]-data[[10]][4]),mean(data[[11]][2]-data[[11]][3]-data[[11]][4]),mean(data[[12]][2]-data[[12]][3]-data[[12]][4]),mean(data[[13]][2]-data[[13]][3]-data[[13]][4]),mean(data[[14]][2]-data[[14]][3]-data[[14]][4]),mean(data[[15]][2]-data[[15]][3]-data[[15]][4]),mean(data[[16]][2]-data[[16]][3]-data[[16]][4])),
			 sigma=c(sd(data[[1]][2]-data[[1]][3]-data[[1]][4]),sd(data[[2]][2]-data[[2]][3]-data[[2]][4]),sd(data[[3]][2]-data[[3]][3]-data[[3]][4]),sd(data[[4]][2]-data[[4]][3]-data[[4]][4]),sd(data[[5]][2]-data[[5]][3]-data[[5]][4]),sd(data[[6]][2]-data[[6]][3]-data[[6]][4]),sd(data[[7]][2]-data[[7]][3]-data[[7]][4]),sd(data[[8]][2]-data[[8]][3]-data[[8]][4]),sd(data[[9]][2]-data[[9]][3]-data[[9]][4]),sd(data[[10]][2]-data[[10]][3]-data[[10]][4]),sd(data[[11]][2]-data[[11]][3]-data[[11]][4]),sd(data[[12]][2]-data[[12]][3]-data[[12]][4]),sd(data[[13]][2]-data[[13]][3]-data[[13]][4]),sd(data[[14]][2]-data[[14]][3]-data[[14]][4]),sd(data[[15]][2]-data[[15]][3]-data[[15]][4]),sd(data[[16]][2]-data[[16]][3]-data[[16]][4])))

# Mean Variation
	limits = aes(ymax = Mean_of_Mem_Usage_kb + sigma, ymin= Mean_of_Mem_Usage_kb - sigma)

# Plot
	png(name[i])

	print(ggplot(banco, aes(x=Threads,y=Mean_of_Mem_Usage_kb)) + geom_point() + geom_errorbar(limits, width=50) + scale_y_continuous(limits=c(0,6000000)))
	dev.off()
}




